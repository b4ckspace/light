<html>
<head>
    <title>Lightcontrol</title>
<script src="http://localhost:8012/socket.io/socket.io.js"></script>
<script src="jquery-1.9.1.min.js"></script>
<script src="q.min.js"></script>
<script src="tools.js"></script>


<script src="client.js"></script>
<script src="presets.js"></script>
<script src="helpers.js"></script>
<script src="app.js"></script>
<script src="workit-reload.js"></script>
<script>

client.on('ready', function(){
    Q.fcall(function(){
        var deferred = Q.defer();
        client.sync_all(function(){
            deferred.resolve()
        });
        return deferred.promise;
    })
    .then(function(){
        var deferred = Q.defer();
        client.get_rooms(function(rooms){
            deferred.resolve(rooms)
        });
        return deferred.promise;öö
    })
    .then(function(rooms){
        var promises = [];
        rooms.forEach(function(room){
            promises.push(printRoom(room));
        });
        return Q.all(promises)
    })
    .done(function(){
        $("#container").append("<hr>").append("<hr>");
        console.log("end of room list");
        presetfoo();
    });
});

</script>
</head>
<body>
    <div id="container"></div>
</body>
</html>